var win = Ti.UI.createWindow({
	title: "Reddit",
	backgroundColor: "#d7d7d7",
	layout: "vertical",
	fullscreen: true,
});

var run = function(data){
	var detail = Ti.UI.createWindow({
		backgroundColor: "#000",
		fullscreen: true,
	});
	
	var scroll = Ti.UI.createScrollView({
			top: 0,
			contentWidth: "auto",
			contentHeight: "auto",
			showVerticalScrollIndicator: true,
			layout: "vertical",
		    width: "auto",
		    height: "auto",
		});
	
	var detailImg = Titanium.UI.createImageView({
			image: data.image,
			width: "100%",
		});
		
	var detailTitle = Titanium.UI.createLabel({
			text: data.title,
			top: 30,
			color:"#232323",
			font: {size:12},
		});
	console.log(data.title);
	scroll.add(detailImg, detailTitle);	
	detail.add(scroll);	
	navWindow.openWindow(detail);
};

var  userInterface = function(e){
		
var pWidth = Ti.Platform.displayCaps.platformWidth;
var pHeight = Ti.Platform.displayCaps.platformHeight;
var rowCount = 1;
var margin = 5;
var trueCanvasWidth = pWidth-margin;
var size = trueCanvasWidth/rowCount-margin;

	var rowData = [];
	var row = Ti.UI.createScrollView({
			top: 0,
			contentWidth: "auto",
			contentHeight: "auto",
			showVerticalScrollIndicator: true,
			layout: "vertical",
		    width: "auto",
		    height: "auto",
		    data: e,
		});
		
		
		
	for (i=0, j=e.length; i<j; i++){
		
		var test = Titanium.UI.createView({
			height:300,
			width:300,
			top:20,
			backgroundColor: "#fff",
			borderRadius:0,
});
	
		
		var img = Titanium.UI.createImageView({
			image: e[i].pic,
			top: 36,
			width: 300,
			height:300,
			
		});
		
		if (e[i].pic.substr(e[i].pic.length - 3 == "jpg")){
			img.image = e[i].pic;
			} else {
				img.image = e[i].pic+ ".jpg";
			};
		
		var stats = Titanium.UI.createView({
			height:100,
			width: 300,
			bottom:0,
			backgroundColor:"#000",
			opacity: .8,
			
		});
		
		var by = Titanium.UI.createLabel({
			text: "Submited by "+ e[i].author,
			left: 10,
			color:"#232323",
			font: {size:12},
		});
		
		var author = Titanium.UI.createLabel({
			text: e[i].author+ " â€¢ " +e[i].score+ " pts",
			left: 10,
			bottom:5,
			color:"#2cbdc6",
			font: {fontSize: 16, fontWeight: "lite"},
		});
		
		var points = Titanium.UI.createLabel({
			text: e[i].score,
			left: 10,
			top:25,
			color:"#2cbdc6",
			font: {fontSize: 18, fontWeight: "bold"},
		});
		
		var pts = Titanium.UI.createLabel({
			text: "pts",
			left: points.left+43,
			top:27,
			color:"#fff",
			font: {size:14},
		});


		var bgBar = Titanium.UI.createView({
			height:36,
			width: 300,
			top:0,
			backgroundColor:"#ffff",
			
		});
		
		var title = Titanium.UI.createLabel({
			text: e[i].title,
			height: 72,
			left: 10,
			right:10,
			top:0,
			color:"#ffff",
		});
	
		
		//Create the row
		
		
		
		//Add the views to the row
		
		test.add(bgBar);
		bgBar.add(by);
		stats.add(author, title);
		test.add(img, stats);
		row.add(test);
		rowData.push(row);
		
		test.addEventListener("click", function(event){
			run(event.source);
	});
	};
		win.add(row);
};


exports.userInterface = userInterface;
var navWindow = Ti.UI.iOS.createNavigationWindow({
	window: win,
});

navWindow.open();

